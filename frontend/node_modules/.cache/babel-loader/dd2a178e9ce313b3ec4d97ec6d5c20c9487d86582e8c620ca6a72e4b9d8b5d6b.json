{"ast":null,"code":"var _jsxFileName = \"/Users/naserabu/Desktop/video distillation/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport axios from 'axios';\n\n// API endpoint for getting presigned URL\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_ENDPOINT = process.env.REACT_APP_API_ENDPOINT;\nconst S3_BUCKET = process.env.REACT_APP_S3_BUCKET;\nfunction App() {\n  _s();\n  const [file, setFile] = useState(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [uploadStatus, setUploadStatus] = useState('');\n  const [isUploading, setIsUploading] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [highlightVideo, setHighlightVideo] = useState(null);\n  const [s3Key, setS3Key] = useState('');\n  const [dragActive, setDragActive] = useState(false);\n  const fileInputRef = useRef(null);\n  const pollingIntervalRef = useRef(null);\n\n  // Clean up polling interval on component unmount\n  useEffect(() => {\n    return () => {\n      if (pollingIntervalRef.current) {\n        clearInterval(pollingIntervalRef.current);\n      }\n    };\n  }, []);\n\n  // Handle file selection\n  const handleFileChange = e => {\n    const selectedFile = e.target.files[0];\n    if (selectedFile && selectedFile.type === 'video/mp4') {\n      setFile(selectedFile);\n      setUploadStatus('');\n      setHighlightVideo(null);\n    } else {\n      setUploadStatus('error');\n      setFile(null);\n      alert('Please select an MP4 video file.');\n    }\n  };\n\n  // Handle drag events\n  const handleDrag = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  // Handle drop event\n  const handleDrop = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      const droppedFile = e.dataTransfer.files[0];\n      if (droppedFile.type === 'video/mp4') {\n        setFile(droppedFile);\n        setUploadStatus('');\n        setHighlightVideo(null);\n      } else {\n        setUploadStatus('error');\n        setFile(null);\n        alert('Please select an MP4 video file.');\n      }\n    }\n  };\n\n  // Handle file upload\n  const handleUpload = async () => {\n    if (!file) {\n      alert('Please select a file first.');\n      return;\n    }\n    try {\n      setIsUploading(true);\n      setUploadProgress(0);\n      setUploadStatus('uploading');\n\n      // Get presigned URL from API\n      const response = await axios.post(API_ENDPOINT, {\n        fileName: file.name,\n        contentType: file.type\n      });\n      const {\n        presignedUrl,\n        s3Key\n      } = response.data;\n      setS3Key(s3Key);\n\n      // Upload file to S3 using presigned URL\n      await axios.put(presignedUrl, file, {\n        headers: {\n          'Content-Type': file.type\n        },\n        onUploadProgress: progressEvent => {\n          const percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n          setUploadProgress(percentCompleted);\n        }\n      });\n      setUploadStatus('success');\n      setIsUploading(false);\n      setIsProcessing(true);\n\n      // Start polling for highlight video\n      startPollingForHighlight(s3Key);\n    } catch (error) {\n      console.error('Error uploading file:', error);\n      setUploadStatus('error');\n      setIsUploading(false);\n    }\n  };\n\n  // Poll for highlight video\n  const startPollingForHighlight = videoKey => {\n    if (pollingIntervalRef.current) {\n      clearInterval(pollingIntervalRef.current);\n    }\n    let attempts = 0;\n    const maxAttempts = 30; // Poll for up to 5 minutes (30 * 10 seconds)\n\n    pollingIntervalRef.current = setInterval(async () => {\n      attempts++;\n      try {\n        // Extract timestamp and ID from the S3 key\n        // Format: input-videos/TIMESTAMP-ID-filename.mp4\n        const keyParts = videoKey.split('/');\n        const filename = keyParts[keyParts.length - 1];\n        const filenameParts = filename.split('-');\n        if (filenameParts.length >= 2) {\n          const timestamp = filenameParts[0];\n          const id = filenameParts[1];\n\n          // Check if highlight video exists\n          const highlightKey = `highlight-videos/${timestamp}-${id}-highlights.mp4`;\n\n          // Try to get the highlight video\n          const highlightUrl = `https://${S3_BUCKET}.s3.amazonaws.com/${highlightKey}`;\n\n          // Make a HEAD request to check if the file exists\n          try {\n            await axios.head(highlightUrl);\n\n            // If we get here, the file exists\n            setHighlightVideo(highlightUrl);\n            setIsProcessing(false);\n            clearInterval(pollingIntervalRef.current);\n          } catch (error) {\n            // File doesn't exist yet, continue polling\n            console.log(`Highlight video not ready yet. Attempt ${attempts}/${maxAttempts}`);\n            if (attempts >= maxAttempts) {\n              setIsProcessing(false);\n              setUploadStatus('error');\n              clearInterval(pollingIntervalRef.current);\n              alert('Highlight generation timed out. Please try again later.');\n            }\n          }\n        }\n      } catch (error) {\n        console.error('Error polling for highlight:', error);\n        if (attempts >= maxAttempts) {\n          setIsProcessing(false);\n          setUploadStatus('error');\n          clearInterval(pollingIntervalRef.current);\n          alert('Highlight generation timed out. Please try again later.');\n        }\n      }\n    }, 10000); // Poll every 10 seconds\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Video Highlights Generator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upload-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `drop-zone ${dragActive ? 'active' : ''}`,\n        onClick: () => fileInputRef.current.click(),\n        onDragEnter: handleDrag,\n        onDragOver: handleDrag,\n        onDragLeave: handleDrag,\n        onDrop: handleDrop,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          ref: fileInputRef,\n          onChange: handleFileChange,\n          accept: \"video/mp4\",\n          style: {\n            display: 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), file ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Selected file: \", file.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Drag and drop an MP4 video file here, or click to select a file\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), file && !isUploading && !isProcessing && !highlightVideo && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpload,\n        style: {\n          padding: '10px 20px',\n          backgroundColor: '#007bff',\n          color: 'white',\n          border: 'none',\n          borderRadius: '5px',\n          cursor: 'pointer',\n          fontSize: '16px',\n          width: '100%'\n        },\n        children: \"Upload Video\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }, this), isUploading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar-fill\",\n            style: {\n              width: `${uploadProgress}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Uploading: \", uploadProgress, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 11\n      }, this), uploadStatus === 'success' && !isProcessing && !highlightVideo && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-message success\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Upload successful!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }, this), uploadStatus === 'error' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-message error\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Error uploading file. Please try again.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }, this), isProcessing && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-message info\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Processing transcription and highlights... This may take a few minutes.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }, this), highlightVideo && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Your Highlight Video\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n          controls: true,\n          children: [/*#__PURE__*/_jsxDEV(\"source\", {\n            src: highlightVideo,\n            type: \"video/mp4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 15\n          }, this), \"Your browser does not support the video tag.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 183,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"l8Uj50KQTEH31bgH5fVprl7lOis=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","jsxDEV","_jsxDEV","API_ENDPOINT","process","env","REACT_APP_API_ENDPOINT","S3_BUCKET","REACT_APP_S3_BUCKET","App","_s","file","setFile","uploadProgress","setUploadProgress","uploadStatus","setUploadStatus","isUploading","setIsUploading","isProcessing","setIsProcessing","highlightVideo","setHighlightVideo","s3Key","setS3Key","dragActive","setDragActive","fileInputRef","pollingIntervalRef","current","clearInterval","handleFileChange","e","selectedFile","target","files","type","alert","handleDrag","preventDefault","stopPropagation","handleDrop","dataTransfer","droppedFile","handleUpload","response","post","fileName","name","contentType","presignedUrl","data","put","headers","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","startPollingForHighlight","error","console","videoKey","attempts","maxAttempts","setInterval","keyParts","split","filename","length","filenameParts","timestamp","id","highlightKey","highlightUrl","head","log","className","children","_jsxFileName","lineNumber","columnNumber","onClick","click","onDragEnter","onDragOver","onDragLeave","onDrop","ref","onChange","accept","style","display","padding","backgroundColor","color","border","borderRadius","cursor","fontSize","width","controls","src","_c","$RefreshReg$"],"sources":["/Users/naserabu/Desktop/video distillation/frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport axios from 'axios';\n\n// API endpoint for getting presigned URL\nconst API_ENDPOINT = process.env.REACT_APP_API_ENDPOINT;\nconst S3_BUCKET = process.env.REACT_APP_S3_BUCKET;\n\nfunction App() {\n  const [file, setFile] = useState(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [uploadStatus, setUploadStatus] = useState('');\n  const [isUploading, setIsUploading] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [highlightVideo, setHighlightVideo] = useState(null);\n  const [s3Key, setS3Key] = useState('');\n  const [dragActive, setDragActive] = useState(false);\n  const fileInputRef = useRef(null);\n  const pollingIntervalRef = useRef(null);\n\n  // Clean up polling interval on component unmount\n  useEffect(() => {\n    return () => {\n      if (pollingIntervalRef.current) {\n        clearInterval(pollingIntervalRef.current);\n      }\n    };\n  }, []);\n\n  // Handle file selection\n  const handleFileChange = (e) => {\n    const selectedFile = e.target.files[0];\n    if (selectedFile && selectedFile.type === 'video/mp4') {\n      setFile(selectedFile);\n      setUploadStatus('');\n      setHighlightVideo(null);\n    } else {\n      setUploadStatus('error');\n      setFile(null);\n      alert('Please select an MP4 video file.');\n    }\n  };\n\n  // Handle drag events\n  const handleDrag = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  // Handle drop event\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    \n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      const droppedFile = e.dataTransfer.files[0];\n      if (droppedFile.type === 'video/mp4') {\n        setFile(droppedFile);\n        setUploadStatus('');\n        setHighlightVideo(null);\n      } else {\n        setUploadStatus('error');\n        setFile(null);\n        alert('Please select an MP4 video file.');\n      }\n    }\n  };\n\n  // Handle file upload\n  const handleUpload = async () => {\n    if (!file) {\n      alert('Please select a file first.');\n      return;\n    }\n\n    try {\n      setIsUploading(true);\n      setUploadProgress(0);\n      setUploadStatus('uploading');\n\n      // Get presigned URL from API\n      const response = await axios.post(API_ENDPOINT, {\n        fileName: file.name,\n        contentType: file.type\n      });\n\n      const { presignedUrl, s3Key } = response.data;\n      setS3Key(s3Key);\n\n      // Upload file to S3 using presigned URL\n      await axios.put(presignedUrl, file, {\n        headers: {\n          'Content-Type': file.type\n        },\n        onUploadProgress: (progressEvent) => {\n          const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n          setUploadProgress(percentCompleted);\n        }\n      });\n\n      setUploadStatus('success');\n      setIsUploading(false);\n      setIsProcessing(true);\n\n      // Start polling for highlight video\n      startPollingForHighlight(s3Key);\n    } catch (error) {\n      console.error('Error uploading file:', error);\n      setUploadStatus('error');\n      setIsUploading(false);\n    }\n  };\n\n  // Poll for highlight video\n  const startPollingForHighlight = (videoKey) => {\n    if (pollingIntervalRef.current) {\n      clearInterval(pollingIntervalRef.current);\n    }\n\n    let attempts = 0;\n    const maxAttempts = 30; // Poll for up to 5 minutes (30 * 10 seconds)\n\n    pollingIntervalRef.current = setInterval(async () => {\n      attempts++;\n      \n      try {\n        // Extract timestamp and ID from the S3 key\n        // Format: input-videos/TIMESTAMP-ID-filename.mp4\n        const keyParts = videoKey.split('/');\n        const filename = keyParts[keyParts.length - 1];\n        const filenameParts = filename.split('-');\n        \n        if (filenameParts.length >= 2) {\n          const timestamp = filenameParts[0];\n          const id = filenameParts[1];\n          \n          // Check if highlight video exists\n          const highlightKey = `highlight-videos/${timestamp}-${id}-highlights.mp4`;\n          \n          // Try to get the highlight video\n          const highlightUrl = `https://${S3_BUCKET}.s3.amazonaws.com/${highlightKey}`;\n          \n          // Make a HEAD request to check if the file exists\n          try {\n            await axios.head(highlightUrl);\n            \n            // If we get here, the file exists\n            setHighlightVideo(highlightUrl);\n            setIsProcessing(false);\n            clearInterval(pollingIntervalRef.current);\n          } catch (error) {\n            // File doesn't exist yet, continue polling\n            console.log(`Highlight video not ready yet. Attempt ${attempts}/${maxAttempts}`);\n            \n            if (attempts >= maxAttempts) {\n              setIsProcessing(false);\n              setUploadStatus('error');\n              clearInterval(pollingIntervalRef.current);\n              alert('Highlight generation timed out. Please try again later.');\n            }\n          }\n        }\n      } catch (error) {\n        console.error('Error polling for highlight:', error);\n        \n        if (attempts >= maxAttempts) {\n          setIsProcessing(false);\n          setUploadStatus('error');\n          clearInterval(pollingIntervalRef.current);\n          alert('Highlight generation timed out. Please try again later.');\n        }\n      }\n    }, 10000); // Poll every 10 seconds\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"header\">\n        <h1>Video Highlights Generator</h1>\n      </div>\n      \n      <div className=\"upload-container\">\n        <div \n          className={`drop-zone ${dragActive ? 'active' : ''}`}\n          onClick={() => fileInputRef.current.click()}\n          onDragEnter={handleDrag}\n          onDragOver={handleDrag}\n          onDragLeave={handleDrag}\n          onDrop={handleDrop}\n        >\n          <input \n            type=\"file\" \n            ref={fileInputRef}\n            onChange={handleFileChange}\n            accept=\"video/mp4\"\n            style={{ display: 'none' }}\n          />\n          {file ? (\n            <p>Selected file: {file.name}</p>\n          ) : (\n            <p>Drag and drop an MP4 video file here, or click to select a file</p>\n          )}\n        </div>\n        \n        {file && !isUploading && !isProcessing && !highlightVideo && (\n          <button \n            onClick={handleUpload}\n            style={{\n              padding: '10px 20px',\n              backgroundColor: '#007bff',\n              color: 'white',\n              border: 'none',\n              borderRadius: '5px',\n              cursor: 'pointer',\n              fontSize: '16px',\n              width: '100%'\n            }}\n          >\n            Upload Video\n          </button>\n        )}\n        \n        {isUploading && (\n          <div className=\"progress-container\">\n            <div className=\"progress-bar\">\n              <div \n                className=\"progress-bar-fill\" \n                style={{ width: `${uploadProgress}%` }}\n              ></div>\n            </div>\n            <p>Uploading: {uploadProgress}%</p>\n          </div>\n        )}\n        \n        {uploadStatus === 'success' && !isProcessing && !highlightVideo && (\n          <div className=\"status-message success\">\n            <p>Upload successful!</p>\n          </div>\n        )}\n        \n        {uploadStatus === 'error' && (\n          <div className=\"status-message error\">\n            <p>Error uploading file. Please try again.</p>\n          </div>\n        )}\n        \n        {isProcessing && (\n          <div className=\"status-message info\">\n            <p>Processing transcription and highlights... This may take a few minutes.</p>\n          </div>\n        )}\n        \n        {highlightVideo && (\n          <div className=\"video-container\">\n            <h2>Your Highlight Video</h2>\n            <video controls>\n              <source src={highlightVideo} type=\"video/mp4\" />\n              Your browser does not support the video tag.\n            </video>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}