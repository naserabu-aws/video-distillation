{"ast":null,"code":"var _jsxFileName = \"/Users/naserabu/Desktop/video distillation/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport AWS from 'aws-sdk';\n\n// S3 bucket name\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst S3_BUCKET = process.env.REACT_APP_S3_BUCKET;\n\n// Configure AWS SDK\nAWS.config.region = 'us-east-1'; // Region\n\nfunction App() {\n  _s();\n  const [file, setFile] = useState(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [uploadStatus, setUploadStatus] = useState('');\n  const [isUploading, setIsUploading] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [highlightVideo, setHighlightVideo] = useState(null);\n  const [s3Key, setS3Key] = useState('');\n  const [dragActive, setDragActive] = useState(false);\n  const fileInputRef = useRef(null);\n  const pollingIntervalRef = useRef(null);\n\n  // Clean up polling interval on component unmount\n  useEffect(() => {\n    return () => {\n      if (pollingIntervalRef.current) {\n        clearInterval(pollingIntervalRef.current);\n      }\n    };\n  }, []);\n\n  // Handle file selection\n  const handleFileChange = e => {\n    const selectedFile = e.target.files[0];\n    if (selectedFile && selectedFile.type === 'video/mp4') {\n      setFile(selectedFile);\n      setUploadStatus('');\n      setHighlightVideo(null);\n    } else {\n      setUploadStatus('error');\n      setFile(null);\n      alert('Please select an MP4 video file.');\n    }\n  };\n\n  // Handle drag events\n  const handleDrag = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  // Handle drop event\n  const handleDrop = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      const droppedFile = e.dataTransfer.files[0];\n      if (droppedFile.type === 'video/mp4') {\n        setFile(droppedFile);\n        setUploadStatus('');\n        setHighlightVideo(null);\n      } else {\n        setUploadStatus('error');\n        setFile(null);\n        alert('Please select an MP4 video file.');\n      }\n    }\n  };\n\n  // Handle file upload\n  const handleUpload = async () => {\n    if (!file) {\n      alert('Please select a file first.');\n      return;\n    }\n    try {\n      setIsUploading(true);\n      setUploadProgress(0);\n      setUploadStatus('uploading');\n\n      // Generate a unique filename with timestamp and random ID\n      const timestamp = Math.floor(Date.now() / 1000).toString();\n      const randomId = Math.random().toString(36).substring(2, 10);\n      const cleanedFilename = file.name.replace(/[^a-zA-Z0-9._-]/g, '');\n      const s3Key = `input-videos/${timestamp}-${randomId}-${cleanedFilename}`;\n      setS3Key(s3Key);\n\n      // Create a new S3 instance\n      const s3 = new AWS.S3({\n        region: 'us-east-1',\n        signatureVersion: 'v4'\n      });\n\n      // Get a presigned URL directly from the AWS SDK\n      const presignedUrl = s3.getSignedUrl('putObject', {\n        Bucket: S3_BUCKET,\n        Key: s3Key,\n        ContentType: file.type,\n        Expires: 60 // URL expires in 60 seconds\n      });\n\n      // Use XMLHttpRequest for upload progress tracking\n      const xhr = new XMLHttpRequest();\n      xhr.open('PUT', presignedUrl);\n      xhr.setRequestHeader('Content-Type', file.type);\n      xhr.upload.onprogress = event => {\n        if (event.lengthComputable) {\n          const percentCompleted = Math.round(event.loaded * 100 / event.total);\n          setUploadProgress(percentCompleted);\n        }\n      };\n      xhr.onload = () => {\n        if (xhr.status === 200) {\n          setUploadStatus('success');\n          setIsUploading(false);\n          setIsProcessing(true);\n\n          // Start polling for highlight video\n          startPollingForHighlight(s3Key);\n        } else {\n          throw new Error(`Upload failed with status: ${xhr.status}`);\n        }\n      };\n      xhr.onerror = () => {\n        throw new Error('Upload failed due to network error');\n      };\n      xhr.send(file);\n    } catch (error) {\n      console.error('Error uploading file:', error);\n      setUploadStatus('error');\n      setIsUploading(false);\n    }\n  };\n\n  // Poll for highlight video\n  const startPollingForHighlight = videoKey => {\n    if (pollingIntervalRef.current) {\n      clearInterval(pollingIntervalRef.current);\n    }\n    let attempts = 0;\n    const maxAttempts = 30; // Poll for up to 5 minutes (30 * 10 seconds)\n\n    pollingIntervalRef.current = setInterval(async () => {\n      attempts++;\n      try {\n        // Extract timestamp and ID from the S3 key\n        // Format: input-videos/TIMESTAMP-ID-filename.mp4\n        const keyParts = videoKey.split('/');\n        const filename = keyParts[keyParts.length - 1];\n        const filenameParts = filename.split('-');\n        if (filenameParts.length >= 2) {\n          const timestamp = filenameParts[0];\n          const id = filenameParts[1];\n\n          // Check if highlight video exists\n          const highlightKey = `highlight-videos/${timestamp}-${id}-highlights.mp4`;\n\n          // Try to get the highlight video\n          const highlightUrl = `https://${S3_BUCKET}.s3.amazonaws.com/${highlightKey}`;\n\n          // Make a HEAD request to check if the file exists\n          try {\n            const response = await fetch(highlightUrl, {\n              method: 'HEAD'\n            });\n            if (response.ok) {\n              // If we get here, the file exists\n              setHighlightVideo(highlightUrl);\n              setIsProcessing(false);\n              clearInterval(pollingIntervalRef.current);\n            } else {\n              throw new Error('File not found');\n            }\n          } catch (error) {\n            // File doesn't exist yet, continue polling\n            console.log(`Highlight video not ready yet. Attempt ${attempts}/${maxAttempts}`);\n            if (attempts >= maxAttempts) {\n              setIsProcessing(false);\n              setUploadStatus('error');\n              clearInterval(pollingIntervalRef.current);\n              alert('Highlight generation timed out. Please try again later.');\n            }\n          }\n        }\n      } catch (error) {\n        console.error('Error polling for highlight:', error);\n        if (attempts >= maxAttempts) {\n          setIsProcessing(false);\n          setUploadStatus('error');\n          clearInterval(pollingIntervalRef.current);\n          alert('Highlight generation timed out. Please try again later.');\n        }\n      }\n    }, 10000); // Poll every 10 seconds\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Video Highlights Generator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upload-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `drop-zone ${dragActive ? 'active' : ''}`,\n        onClick: () => fileInputRef.current.click(),\n        onDragEnter: handleDrag,\n        onDragOver: handleDrag,\n        onDragLeave: handleDrag,\n        onDrop: handleDrop,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          ref: fileInputRef,\n          onChange: handleFileChange,\n          accept: \"video/mp4\",\n          style: {\n            display: 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this), file ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Selected file: \", file.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Drag and drop an MP4 video file here, or click to select a file\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), file && !isUploading && !isProcessing && !highlightVideo && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpload,\n        style: {\n          padding: '10px 20px',\n          backgroundColor: '#007bff',\n          color: 'white',\n          border: 'none',\n          borderRadius: '5px',\n          cursor: 'pointer',\n          fontSize: '16px',\n          width: '100%'\n        },\n        children: \"Upload Video\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }, this), isUploading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar-fill\",\n            style: {\n              width: `${uploadProgress}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Uploading: \", uploadProgress, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }, this), uploadStatus === 'success' && !isProcessing && !highlightVideo && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-message success\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Upload successful!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 11\n      }, this), uploadStatus === 'error' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-message error\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Error uploading file. Please try again.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 11\n      }, this), isProcessing && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-message info\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Processing transcription and highlights... This may take a few minutes.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 11\n      }, this), highlightVideo && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Your Highlight Video\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n          controls: true,\n          children: [/*#__PURE__*/_jsxDEV(\"source\", {\n            src: highlightVideo,\n            type: \"video/mp4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 15\n          }, this), \"Your browser does not support the video tag.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 214,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"l8Uj50KQTEH31bgH5fVprl7lOis=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","AWS","jsxDEV","_jsxDEV","S3_BUCKET","process","env","REACT_APP_S3_BUCKET","config","region","App","_s","file","setFile","uploadProgress","setUploadProgress","uploadStatus","setUploadStatus","isUploading","setIsUploading","isProcessing","setIsProcessing","highlightVideo","setHighlightVideo","s3Key","setS3Key","dragActive","setDragActive","fileInputRef","pollingIntervalRef","current","clearInterval","handleFileChange","e","selectedFile","target","files","type","alert","handleDrag","preventDefault","stopPropagation","handleDrop","dataTransfer","droppedFile","handleUpload","timestamp","Math","floor","Date","now","toString","randomId","random","substring","cleanedFilename","name","replace","s3","S3","signatureVersion","presignedUrl","getSignedUrl","Bucket","Key","ContentType","Expires","xhr","XMLHttpRequest","open","setRequestHeader","upload","onprogress","event","lengthComputable","percentCompleted","round","loaded","total","onload","status","startPollingForHighlight","Error","onerror","send","error","console","videoKey","attempts","maxAttempts","setInterval","keyParts","split","filename","length","filenameParts","id","highlightKey","highlightUrl","response","fetch","method","ok","log","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","click","onDragEnter","onDragOver","onDragLeave","onDrop","ref","onChange","accept","style","display","padding","backgroundColor","color","border","borderRadius","cursor","fontSize","width","controls","src","_c","$RefreshReg$"],"sources":["/Users/naserabu/Desktop/video distillation/frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport AWS from 'aws-sdk';\n\n// S3 bucket name\nconst S3_BUCKET = process.env.REACT_APP_S3_BUCKET;\n\n// Configure AWS SDK\nAWS.config.region = 'us-east-1'; // Region\n\nfunction App() {\n  const [file, setFile] = useState(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [uploadStatus, setUploadStatus] = useState('');\n  const [isUploading, setIsUploading] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [highlightVideo, setHighlightVideo] = useState(null);\n  const [s3Key, setS3Key] = useState('');\n  const [dragActive, setDragActive] = useState(false);\n  const fileInputRef = useRef(null);\n  const pollingIntervalRef = useRef(null);\n\n  // Clean up polling interval on component unmount\n  useEffect(() => {\n    return () => {\n      if (pollingIntervalRef.current) {\n        clearInterval(pollingIntervalRef.current);\n      }\n    };\n  }, []);\n\n  // Handle file selection\n  const handleFileChange = (e) => {\n    const selectedFile = e.target.files[0];\n    if (selectedFile && selectedFile.type === 'video/mp4') {\n      setFile(selectedFile);\n      setUploadStatus('');\n      setHighlightVideo(null);\n    } else {\n      setUploadStatus('error');\n      setFile(null);\n      alert('Please select an MP4 video file.');\n    }\n  };\n\n  // Handle drag events\n  const handleDrag = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  // Handle drop event\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    \n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      const droppedFile = e.dataTransfer.files[0];\n      if (droppedFile.type === 'video/mp4') {\n        setFile(droppedFile);\n        setUploadStatus('');\n        setHighlightVideo(null);\n      } else {\n        setUploadStatus('error');\n        setFile(null);\n        alert('Please select an MP4 video file.');\n      }\n    }\n  };\n\n  // Handle file upload\n  const handleUpload = async () => {\n    if (!file) {\n      alert('Please select a file first.');\n      return;\n    }\n\n    try {\n      setIsUploading(true);\n      setUploadProgress(0);\n      setUploadStatus('uploading');\n\n      // Generate a unique filename with timestamp and random ID\n      const timestamp = Math.floor(Date.now() / 1000).toString();\n      const randomId = Math.random().toString(36).substring(2, 10);\n      const cleanedFilename = file.name.replace(/[^a-zA-Z0-9._-]/g, '');\n      const s3Key = `input-videos/${timestamp}-${randomId}-${cleanedFilename}`;\n      setS3Key(s3Key);\n\n      // Create a new S3 instance\n      const s3 = new AWS.S3({\n        region: 'us-east-1',\n        signatureVersion: 'v4'\n      });\n\n      // Get a presigned URL directly from the AWS SDK\n      const presignedUrl = s3.getSignedUrl('putObject', {\n        Bucket: S3_BUCKET,\n        Key: s3Key,\n        ContentType: file.type,\n        Expires: 60 // URL expires in 60 seconds\n      });\n\n      // Use XMLHttpRequest for upload progress tracking\n      const xhr = new XMLHttpRequest();\n      xhr.open('PUT', presignedUrl);\n      xhr.setRequestHeader('Content-Type', file.type);\n      \n      xhr.upload.onprogress = (event) => {\n        if (event.lengthComputable) {\n          const percentCompleted = Math.round((event.loaded * 100) / event.total);\n          setUploadProgress(percentCompleted);\n        }\n      };\n      \n      xhr.onload = () => {\n        if (xhr.status === 200) {\n          setUploadStatus('success');\n          setIsUploading(false);\n          setIsProcessing(true);\n          \n          // Start polling for highlight video\n          startPollingForHighlight(s3Key);\n        } else {\n          throw new Error(`Upload failed with status: ${xhr.status}`);\n        }\n      };\n      \n      xhr.onerror = () => {\n        throw new Error('Upload failed due to network error');\n      };\n      \n      xhr.send(file);\n    } catch (error) {\n      console.error('Error uploading file:', error);\n      setUploadStatus('error');\n      setIsUploading(false);\n    }\n  };\n\n  // Poll for highlight video\n  const startPollingForHighlight = (videoKey) => {\n    if (pollingIntervalRef.current) {\n      clearInterval(pollingIntervalRef.current);\n    }\n\n    let attempts = 0;\n    const maxAttempts = 30; // Poll for up to 5 minutes (30 * 10 seconds)\n\n    pollingIntervalRef.current = setInterval(async () => {\n      attempts++;\n      \n      try {\n        // Extract timestamp and ID from the S3 key\n        // Format: input-videos/TIMESTAMP-ID-filename.mp4\n        const keyParts = videoKey.split('/');\n        const filename = keyParts[keyParts.length - 1];\n        const filenameParts = filename.split('-');\n        \n        if (filenameParts.length >= 2) {\n          const timestamp = filenameParts[0];\n          const id = filenameParts[1];\n          \n          // Check if highlight video exists\n          const highlightKey = `highlight-videos/${timestamp}-${id}-highlights.mp4`;\n          \n          // Try to get the highlight video\n          const highlightUrl = `https://${S3_BUCKET}.s3.amazonaws.com/${highlightKey}`;\n          \n          // Make a HEAD request to check if the file exists\n          try {\n            const response = await fetch(highlightUrl, { method: 'HEAD' });\n            \n            if (response.ok) {\n              // If we get here, the file exists\n              setHighlightVideo(highlightUrl);\n              setIsProcessing(false);\n              clearInterval(pollingIntervalRef.current);\n            } else {\n              throw new Error('File not found');\n            }\n          } catch (error) {\n            // File doesn't exist yet, continue polling\n            console.log(`Highlight video not ready yet. Attempt ${attempts}/${maxAttempts}`);\n            \n            if (attempts >= maxAttempts) {\n              setIsProcessing(false);\n              setUploadStatus('error');\n              clearInterval(pollingIntervalRef.current);\n              alert('Highlight generation timed out. Please try again later.');\n            }\n          }\n        }\n      } catch (error) {\n        console.error('Error polling for highlight:', error);\n        \n        if (attempts >= maxAttempts) {\n          setIsProcessing(false);\n          setUploadStatus('error');\n          clearInterval(pollingIntervalRef.current);\n          alert('Highlight generation timed out. Please try again later.');\n        }\n      }\n    }, 10000); // Poll every 10 seconds\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"header\">\n        <h1>Video Highlights Generator</h1>\n      </div>\n      \n      <div className=\"upload-container\">\n        <div \n          className={`drop-zone ${dragActive ? 'active' : ''}`}\n          onClick={() => fileInputRef.current.click()}\n          onDragEnter={handleDrag}\n          onDragOver={handleDrag}\n          onDragLeave={handleDrag}\n          onDrop={handleDrop}\n        >\n          <input \n            type=\"file\" \n            ref={fileInputRef}\n            onChange={handleFileChange}\n            accept=\"video/mp4\"\n            style={{ display: 'none' }}\n          />\n          {file ? (\n            <p>Selected file: {file.name}</p>\n          ) : (\n            <p>Drag and drop an MP4 video file here, or click to select a file</p>\n          )}\n        </div>\n        \n        {file && !isUploading && !isProcessing && !highlightVideo && (\n          <button \n            onClick={handleUpload}\n            style={{\n              padding: '10px 20px',\n              backgroundColor: '#007bff',\n              color: 'white',\n              border: 'none',\n              borderRadius: '5px',\n              cursor: 'pointer',\n              fontSize: '16px',\n              width: '100%'\n            }}\n          >\n            Upload Video\n          </button>\n        )}\n        \n        {isUploading && (\n          <div className=\"progress-container\">\n            <div className=\"progress-bar\">\n              <div \n                className=\"progress-bar-fill\" \n                style={{ width: `${uploadProgress}%` }}\n              ></div>\n            </div>\n            <p>Uploading: {uploadProgress}%</p>\n          </div>\n        )}\n        \n        {uploadStatus === 'success' && !isProcessing && !highlightVideo && (\n          <div className=\"status-message success\">\n            <p>Upload successful!</p>\n          </div>\n        )}\n        \n        {uploadStatus === 'error' && (\n          <div className=\"status-message error\">\n            <p>Error uploading file. Please try again.</p>\n          </div>\n        )}\n        \n        {isProcessing && (\n          <div className=\"status-message info\">\n            <p>Processing transcription and highlights... This may take a few minutes.</p>\n          </div>\n        )}\n        \n        {highlightVideo && (\n          <div className=\"video-container\">\n            <h2>Your Highlight Video</h2>\n            <video controls>\n              <source src={highlightVideo} type=\"video/mp4\" />\n              Your browser does not support the video tag.\n            </video>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}